{% extends 'base.html' %}
{% load static %}
{% block body %}

{% include 'navbar.html' with staff=staff notification_count=notification_count %}

<section class="sectionLogin">
  <br>
  <h2 style = "text-align: center;">Inventory</h2>
<br>

{% if staff.room.room_id %}
  <h3 style = "text-align: center;">Office : {{staff.room.room_id}}</h3> 

<h4 style = "text-align: center;"> Items Alloted to You </h4>
<div class="container">
  <div class="col-lg-12" style = "text-align: right;">
    <a href = "{%url 'main:viewinventorylogs'%}" style="color: white;text-decoration: none;"><button class="btn btn-dark" style = "border-radius: 20px;">Inventory Logs</button></a>
    <a href="{%url 'main:devicesreturnrequest' id=staff.id%}" style="color: white;text-decoration: none;"><button class="btn btn-dark" style = "border-radius: 20px;"><i class="fa-solid fa-minus"></i> Return an Item</button></a>
  </div>
  <br>
    <div class="inventory-table">
        <table class="table1 table table-borderless table-dark table-hover" style = "text-align: center;">
            <thead>
              <tr>
                <th scope="col" >Item Id</th>
                <th scope="col" >Item Name</th>
                <th scope="col" >Item Description</th>
                <th scope="col" >Date Alloted</th>
                <th scope="col" >Add Complaint</th>
                <th scope="col" >All Complaints</th>
              </tr>
            </thead>
    
            <tbody>
              {% for device in inventory %}
              {% if device.is_requested_for_return %}
              <tr class="table-success" style = "text-align: center;color: red;">
                <td>{{device.device.device_id}}</td>
                <td>{{device.device.name}}</td>
                <td>{{device.device.description}}</td>
                <td>{{device.date_added}}</td> 
                <td><a href="{% url 'main:complaint' pk=device.device.id %}"><button class="btn btn-dark btn-sm" type="submit">Add Complaint </button></a></td>
                <td><a href="{% url 'main:viewdevicecomplaints' id=device.device.id %}"><button class="btn btn-dark btn-sm" type="submit">View All Complaints </button></a></td>                    
              </tr>
              {% else %}
              <tr class="table-success" style = "text-align: center;color: green;">
                <td>{{device.device.device_id}}</td>
                <td>{{device.device.name}}</td>
                <td>{{device.device.description}}</td>
                <td>{{device.date_added}}</td> 
                <td><a href="{% url 'main:complaint' pk=device.device.id %}"><button class="btn btn-dark btn-sm" type="submit">Add Complaint </button></a></td>   
                <td><a href="{% url 'main:viewdevicecomplaints' id=device.device.id %}"><button class="btn btn-dark btn-sm" type="submit">View All Complaints </button></a></td>                  
              </tr>
              {% endif %} 
              {% endfor %}
            </tbody>
          </table>
        </div>
    </div> 
    {% else %}  
      <h1>Office : No office Assigned </h1> 
    {% endif %}
{% endblock body %}
